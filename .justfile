####################################################################################################

_default:
  @just --list

####################################################################################################

# print justfile
@show:
  bat .justfile --language make

####################################################################################################

# edit justfile
@edit:
  micro .justfile

####################################################################################################
# aliases
####################################################################################################
####################################################################################################
# import
####################################################################################################

# config
import '.just/go.conf'

####################################################################################################
# jobs
####################################################################################################

# build for OSX
osx app=goapp:
  @echo "Building..."
  go build -v -o excalibur/{{app}}

####################################################################################################

# build for linux
linux app=goapp:
  @echo "Building..."
  env GOOS=linux GOARCH=amd64 go build -v -o excalibur/{{app}}

####################################################################################################

# install locally
install app=goapp exe=goexe:
  @echo "Install..."
  go install
  mv -v "${HOME}/.go/bin/{{app}}" "${HOME}/.go/bin/{{exe}}"

####################################################################################################

# watch changes
watch:
  watchexec --clear --watch cmd -- 'just install'

####################################################################################################
####################################################################################################
# import
####################################################################################################

# config
import '.just/py.conf'

####################################################################################################
# jobs
####################################################################################################

# create enviroment
env app=pyapp:
  #!/bin/bash
  echo "Building..."
  python3 -m venv {{app}}

####################################################################################################

# link bpython
link app=pyapp ver=pyver:
  #!/bin/bash
  echo "Linking..."
  ln -sf $(which bpython) {{app}}/bin/{{ver}}

####################################################################################################

# activate enviroment
act app=pyapp:
  #!/bin/bash
  echo "Activating..."
  source {{app}}/bin/activate

####################################################################################################
